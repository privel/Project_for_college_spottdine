{% load static %}

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpottDine - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–æ–≤</title>
    <link rel="stylesheet" href="{% static 'css/reserv.css' %}">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css"
          href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    {% block extrascripts %}
    <script src="{% static 'js/modal.js' %}"></script>
    {% endblock %}
    <link rel="shortcut icon" href="{% static 'images/icon.png' %}"/>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=–í–ê–®_API_–ö–õ–Æ–ß&lang=ru_RU" type="text/javascript"></script>

</head>
<body>
{% for zav in zaved %}
{% if booking.id == zav.id %}
<header class="header">
    <div class="logo"><a href="/", style="text-decoration: none; color: black;">Spott <font
            color="#00D55A">Dine</font> </a></div>
    <div class="search-bar">
        <form action="" method="GET">
            {% csrf_token %}
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫..." class="transparent-input">
            <button type="submit">–ù–∞–π—Ç–∏</button>
        </form>
    </div>
</header>

<div class="main">
    <h1>{{zav.name}}</h1>
    <div class="descript">
        <button>–û–ø–∏—Å–∞–Ω–∏–µ</button>
        <a href="/menu/{{zav.id}}"><button>–ú–µ–Ω—é</button></a>
        <a style="text-decoration: none; color: #333333" href="/galery/{{zav.id}}">
            <button>–§–æ—Ç–æ–∞–ª—å–±–æ–º—ã</button>
        </a>
    </div>
    <div class="slider">

        {% for image in zav.images.all %}

        <img src="{{ image.image.url }}">

        {% empty %}
        <img src="{{ zav.image.url }}" alt="Image of {{ zav.name }}">
        {% endfor %}
    </div>
</div>

<div class="outer-container">
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h1>{{zav.name}}</h1>
                <button class="share" onclick="shareContent()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            </div>
            <a href="#">{{zav.adress}}</a>
            <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω: {{zav.telephone}}</strong></p>
            <p>

            <table>
                <tr>
                    <td rowspan="2">
                        <img width="40px" src="{% static "images/plateGBig.png" %}">
                    </td>
                    <td>
                        <font style=" font-size: 18px; font-weight: bold;">–ö—É—Ö–Ω—è</font>
                    </td>
                </tr>
                <tr>
                    <td>
                        {{ zav.kitchen }}
                    </td>
                </tr>
            </table>

            </p>

            <p>

            <table>
                <tr>
                    <td>
                        <table>
                            <tr>
                                <td rowspan="2">
                                    <img width="40px" src="{% static "images/tengeGBig.png" %}" >
                                </td>
                                <td>
                                    <font style=" font-size: 18px; font-weight: bold;">–°—Ä–µ–¥–Ω–∏–π —Å—á–µ—Ç</font>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    {{ zav.avr_cost }}
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        <table>
                            <tr>
                                <td rowspan="2">
                                    <img width="57px" src="{% static "images/person.png" %}">
                                </td>
                                <td>
                                    <font style=" font-size: 18px; font-weight: bold;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç</font>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    {{ zav.count_people }}
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>


            </p>


            <p>
            <table>
                <tr>
                    <td>
                        <span class="place-info-list__icon">üåü</span>
                    </td>
                    <td>
                        {{ zav.have }}
                    </td>
                </tr>

            </table>
            </p>

            <p>
            <table>
                <tr>
                    <td>

                        <span class="place-info-list__icon">üè¢</span>
                    </td>
                    <td colspan="2">
                        {{ zav.desc_zal }}
                    </td>
                </tr>
                <tr>
                    <td>

                    </td>
                    <td>
                    </td>
                </tr>
            </table>
            </p>


            <p>
            <table>
                <tr>
                    <td>
                        <span class="place-info-list__icon">üé∏</span>
                    </td>
                    <td>
                        {{ zav.music }}
                    </td>
                </tr>

            </table>
            </p>

            <p>
            <table>
                <tr>
                    <td>
                        <span class="place-info-list__icon">üë∂</span>
                    </td>
                    <td>
                        {{ zav.children }}
                    </td>
                </tr>

            </table>
            </p>


            <p>
            <table>
                <tr>
                    <td>
                        <span class="place-info-list__icon">üÖøÔ∏è</span>
                    </td>
                    <td>
                        {{ zav.parking }}
                    </td>
                </tr>

            </table>
            </p>

            <p>
            <table>
                <tr>
                    <td>
                        <span class="place-info-list__icon">‚åöÔ∏è</span>
                    </td>
                    <td>
                        {{ zav.time_work }}
                    </td>
                </tr>

            </table>
            </p>

            <p>
                –ê–¥—Ä–µ—Å: {{zav.adress}}
            </p>

            <p style="padding-top: 20px;">
                –¢–µ–ª–µ—Ñ–æ–Ω—ã:<a href="tel: {{zav.telephone}}"> {{zav.telephone}}</a>
            </p>

            <p style="padding-top: 20px;">

            <table>
                <tr>
                    <td>
                    <span>
                        <a href="{{zav.whatsapp}}">
                            <img src="{% static "image/whatsapp.png" %}" width='25px'>
                        </a>
                    </span>
                    </td>
                    <td>
                        <a href="{{zav.whatsapp}}" class="whatsapp">Whatsapp</a>
                    </td>
                </tr>
            </table>


            <table>
                <tr>
                    <td>
                    <span>
                        <a href="{{zav.sotial}}">
                            <img src="{% static "image/instagram.png" %}" width='25px'>
                        </a>
                    </span>
                    </td>
                    <td>
                        <a href="{{zav.sotial}}" class="whatsapp">Instagram</a>
                    </td>
                </tr>
            </table>


            <table>
                <tr>
                    <td>
                    <span>
                        <a href="{{zav.site_adress}}">
                            <img src="{% static "image/web.png" %}" width='25px'>
                        </a>
                    </span>
                    </td>
                    <td>
                        <a href="{{zav.site_adress}}" class="whatsapp">–í–µ–±-—Å–∞–π—Ç</a>
                    </td>
                </tr>
            </table>

            </p>

            <p style="padding-top: 40px;">

            </p>

            <div class="button-container">


            </div>

            <p id="shortText" style="padding-top: 20px; " class="p_shadow">{{ zav.more_desc|slice:":400" }}</p>

            <p id="moreText" style="padding-top: 13px; display: none;">{{ zav.more_desc }}</p>
            <a id="readButton" onclick="showMoreText()" class="btn_more">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</a>

             <p style="padding-top: 30px;">

                 

                <div class="container1">
                    <div class="leave-review-container">
                        <a href="/reting/{{ zav.id }}">
                            <button class="leave_review">

                                <img src="{% static 'image/likee.png' %}" width="20px" alt="Like Icon"> –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                            </button>
                        </a>

                        <a href="?filter=positive" id="show-positive">
                            <button class="leave_review1" >
                                –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ
                            </button>
                        </a>
                    <a href="?filter=negative" id="show-negative">
                        <button class="leave_review1" >
                        –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ
                        </button>
                    </a>

                    </div>
                    <h2>–û—Ç–∑—ã–≤—ã –æ {{zav.name}}</h2>

                    <div class="grid-container">

                    {% for reting in retings %}
                        {% if  zav.id == reting.zaved_id %}

                        <div class="grid-item">
                            <h3>{{ reting.author }}</h3>
                            –û —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ <a href="booking/{{zav.id}}" style="text-decoration: none; color:#00D55A;">{{zav.name}}</a>
                            <p>{{ reting.content }}</p>
                            {% if reting.is_good %}

                        <font size="2" style="padding-top: 30px;">–ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å: {{ reting.bis }}</font>
                            {% else %}
                                <font size="2" style="padding-top: 30px;">–ù–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å: {{ reting.bis }}</font>
                            {% endif %}
                              <p> <font size="3">{{ reting.created_at }}</font></p>
                        </div>

                        {% endif %}
                {% endfor %}

                    </div>
                </div>
                
             </p>

        </div>

        <div class="booking">
            <h1>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
            <p>–î–∞—Ç–∞</p>
            <div class="booking-controls">
                <!--            <select class="form-control input-lg">-->
                <!--                <option value="2023-12-21">—Å–µ–≥–æ–¥–Ω—è, 21 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-22">–ø—è—Ç–Ω–∏—Ü–∞, 22 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-23">—Å—É–±–±–æ—Ç–∞, 23 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-24">–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 24 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-25">–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 25 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-26">–≤—Ç–æ—Ä–Ω–∏–∫, 26 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--                <option value="2023-12-27">—Å—Ä–µ–¥–∞, 27 –¥–µ–∫–∞–±—Ä—è</option>-->
                <!--            </select>-->
                <form action="#" method="post">

                    <input type="date" id="date" name="date">

                </form>

                <div class="time-and-guests">
                    <div class="time">
                        <label for="booking-time">–í—Ä–µ–º—è</label>
                        <select id="booking-time">
                            <option value="11:00">11:00</option>
                            <option value="12:00">12:00</option>
                            <option value="13:00">13:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                            <option value="21:00">21:00</option>
                            <option value="22:00">22:00</option>
                            <option value="23:00">23:00</option>

                        </select>
                    </div>
                    <div class="guests">
                        <label for="booking-guests">–ì–æ—Å—Ç–∏</label>
                        <select id="booking-guests">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                        </select>
                    </div>
                </div>
            </div>
            <button class="reserve-button" style="background-color: #f46d3e;" onclick="openModal()">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>
    </div>
</div>

<div id="myModal2" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal2()">&times;</span>
        <label for="booking-date">–î–∞—Ç–∞</label>
        <select id="booking-date2" class="form-control input-lg">
            <option value="2023-12-21">—Å–µ–≥–æ–¥–Ω—è, 21 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-22">–ø—è—Ç–Ω–∏—Ü–∞, 22 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-23">—Å—É–±–±–æ—Ç–∞, 23 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-24">–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 24 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-25">–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 25 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-26">–≤—Ç–æ—Ä–Ω–∏–∫, 26 –¥–µ–∫–∞–±—Ä—è</option>
            <option value="2023-12-27">—Å—Ä–µ–¥–∞, 27 –¥–µ–∫–∞–±—Ä—è</option>
        </select>


        <!-- ... (existing controls) -->

        <div class="time-and-guests">
            <label for="booking-time">–í—Ä–µ–º—è</label>
            <select id="booking-time2" class="form-control input-lg">
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
            </select>

            <label for="booking-guests">–ì–æ—Å—Ç–∏</label>
            <select id="booking-guests2" class="form-control input-lg">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
            </select>

            <label for="booking-comments">–ü–æ–∂–µ–ª–∞–Ω–∏—è</label>
            <textarea id="booking-comments2" rows="4" cols="50" class="form-control input-lg"></textarea>
        </div>

        <button class="reserve-button" style="background-color: #f46d3e;" onclick="confirmReservation()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
            –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        </button>

    </div>
</div>


<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>


        <form action="#" method="POST">
            {% csrf_token %}
            <label for="date">–î–∞—Ç–∞:</label>
            <input type="date" id="date" name="date">

            <div class="time-and-guests">
                <div class="time">
                    <label for="booking-time">–í—Ä–µ–º—è:</label>
                    <select id="booking-time" name="booking_time">
                        <!-- –í—Ä–µ–º—è -->
                        <option value="11:00">11:00</option>
                            <option value="12:00">12:00</option>
                            <option value="13:00">13:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                            <option value="17:00">17:00</option>
                            <option value="18:00">18:00</option>
                            <option value="19:00">19:00</option>
                            <option value="20:00">20:00</option>
                            <option value="21:00">21:00</option>
                            <option value="22:00">22:00</option>
                            <option value="23:00">23:00</option>
                    </select>
                </div>
                <div class="guests">
                    <label for="booking-guests">–ì–æ—Å—Ç–∏:</label>
                    <input name="booking_guests" type="number"  class="number_input">

                </div>
            </div>
            <label for="booking-comments">–ü–æ–∂–µ–ª–∞–Ω–∏—è</label>
            <textarea id="booking-comments" rows="4" cols="50" class="form-control input-lg" name="prod"></textarea>

            <button type="submit" class="reserve-button">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</button>

        </form>





    </div>
</div>

{% endif%}
{% endfor %}
<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DatePicker
    const datepicker = new Pikaday({
        field: document.getElementById('datepicker'),
        format: 'DD.MM.YYYY', // –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã "DD.MM.YYYY"
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å"
    document.getElementById("showCalendar").addEventListener("click", () => {
        datepicker.show();
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã
    datepicker.onSelect = function (date) {
        const formattedDate = moment(date).format("DD.MM.YYYY"); // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –∫–∞–∫ "DD.MM.YYYY"
        document.getElementById("formattedDate").textContent = formattedDate;
    };


    function showMoreText() {
        var shortText = document.getElementById("shortText");
        var moreText = document.getElementById("moreText");
        var btnText = document.querySelector("button");
        var readButton = document.getElementById("readButton");

        if (shortText.style.display === "none") {
            shortText.style.display = "inline";
            moreText.style.display = "none";
            btnText.textContent = "Read more";
        } else {
            shortText.style.display = "none";
            moreText.style.display = "inline";
            btnText.textContent = "Read less";
            readButton.style.display = "none"; // Hide the button after clicking
        }
    }
</script>
<script>
    $(document).ready(function () {
        $('.slider').slick({
            prevArrow: '<img src="{% static "image/left-arrow.png" %}" class="slick-prev" alt="Previous">',
            nextArrow: '<img src="{% static "image/right-arrow.png" %}" class="slick-next" alt="Next">',
            arrows: true,
            dots: true,
            infinite: true,
            speed: 500,
            slidesToShow: 1,
            slidesToScroll: 1
        });
    });
</script>
<script>
    function toggleReviewForm() {
        var reviewForm = document.getElementById("reviewForm");
        reviewForm.style.display = (reviewForm.style.display === "none") ? "block" : "none";
    }
</script>

<script>
    function redirectToPage() {
        var url = document.querySelector('.leave_review').getAttribute('data-url');
        window.location.href = url;
    }
</script>

<script>
    function redirectToRatingPage() {
        window.location.href = '/reting/5/';
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var outerContainer = document.querySelector('.outer-container');
        var bookingDiv = document.querySelector('.booking');

        window.addEventListener('scroll', function () {
            var containerBottom = outerContainer.getBoundingClientRect().bottom;

            if (containerBottom <= 0) {
                bookingDiv.classList.add('unfix-booking');
            } else {
                bookingDiv.classList.remove('unfix-booking');
            }
        });
    });
</script>


</body>
</html>
